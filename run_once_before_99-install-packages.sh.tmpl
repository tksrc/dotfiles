{{- if eq .chezmoi.os "darwin" -}}
#!/bin/bash

set -e # exit immediately if any command returns a non-zero exit code
set -f # disable filename expansion (globbing)

# Ask for the admin password
sudo -v

# Keepalive the sudo access
while true; do sudo -n true; sleep 60; kill -0 "$$" || exit; done 2>/dev/null &

printf "\nðŸš€ Installing Software Packages for a MacOS\n"

PATH=$PATH:/opt/homebrew/bin
BREW_PREFIX=$(brew --prefix)

# Standard Apps
brew install --cask \
brave-browser \
firefox \
bitwarden \
spotify \
appcleaner \
visual-studio-code \
alfred \
drawio \
dash \
iterm2 \
obs \
grammarly-desktop \
jetbrains-toolbox \
privatevpn \
selfcontrol \
vlc \
piezo \
obsidian \
docker

brew install \
dive \
calibre \
devutils

# CLI
brew tap aws/tap
brew install \
gh \
azure-cli \
awscli \
kubectl \
helm \
derailed/k9s/k9s \
aws-sam-cli

# Infrastructure
brew install \
pulumi \
terraform \
terragrunt \
terraform-docs \
terrascan \
trivy

# # .NET
# brew install dotnet-sdk # sdk
# brew isntall dotnet # runtime

# dotnet tool uninstall --global dotnet-ef || true
# dotnet tool install --global -a arm64 dotnet-ef  || true

# dotnet tool uninstall --global dotnet-aspnet-codegenerator || true
# dotnet tool install --global -a arm64 dotnet-aspnet-codegenerator || true

# dotnet tool uninstall --global dotnet-svcutil || true
# dotnet tool install --global -a arm64 powershell || true

# dotnet tool uninstall --global Microsoft.Web.LibraryManager.Cli || true
# dotnet tool install --global -a arm64 Microsoft.Web.LibraryManager.Cli || true

# Other Tools
brew install coreutils
ln -s "${BREW_PREFIX}/bin/gsha256sum" "${BREW_PREFIX}/bin/sha256sum" || true
brew install moreutils \
findutils \
gnu-sed \
gnu-tar \
grep \
openssh \
ack \
git \
git-lfs \
jq \
yq \
htop \
pv \
tree \
wget \
tmux \
hey \
mtr \
hugo

printf "\nâœ… Complete\n"

{{ end -}}